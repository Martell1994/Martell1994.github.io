{"title":"Git 手册之 Mac 上给 Git 设置 SOCKS5/HTTP 代理","date":"2018-09-02T10:59:02.000Z","date_formatted":{"ll":"Sep 2, 2018","L":"09/02/2018","MM-DD":"09-02"},"thumbnail":"2018/set-up-sock5-or-http-proxy-for-git-on-mac/github.png","link":"2018/set-up-sock5-or-http-proxy-for-git-on-mac","tags":["HTTP","SOCKS5"],"categories":["Git"],"updated":"2020-01-26T05:46:52.595Z","content":"<p>我们常会遇到从 GitHub 上 clone 代码的时候龟速的情况，这时如果手上有不错的代理，可以借助代理来获取更快下载/上传资源的速度。</p>\n<a id=\"more\"></a>\n\n<p>通常我们 clone 代码时有以下两种方式：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; HTTPS 方式</span><br><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;accountname&#x2F;projectname.git</span><br><span class=\"line\">&#x2F;&#x2F; SSH 方式</span><br><span class=\"line\">git@github.com:accountname&#x2F;projectname.git</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"设置-http-方式的代理\">设置 HTTP 方式的代理<a href=\"#设置-http-方式的代理\" title=\"设置 HTTP 方式的代理\"></a></h2><p>由于 Shadowsocks 客户端就提供一个本地的 SOCKS5 代理，代理地址是 127.0.0.1:1080。在终端输入以下配置：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global http.proxy <span class=\"string\">\"socks5://127.0.0.1:1080\"</span></span><br><span class=\"line\">git config --global https.proxy <span class=\"string\">\"socks5://127.0.0.1:1080\"</span></span><br></pre></td></tr></table></figure>\n\n<p>取消代理则：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global --<span class=\"built_in\">unset</span> http.proxy</span><br><span class=\"line\">git config --global --<span class=\"built_in\">unset</span> https.proxy</span><br></pre></td></tr></table></figure>\n\n<p>也可以直接修改用户主目录下的  <code>.gitconfig</code> 文件，插入如下内容：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[http]</span><br><span class=\"line\">        proxy &#x3D; socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class=\"line\">[https]</span><br><span class=\"line\">        proxy &#x3D; socks5:&#x2F;&#x2F;127.0.0.1:1080</span><br></pre></td></tr></table></figure>\n\n<p>如果你用的不是 SOCKS5，而是 HTTP 代理，就把上面命令中的 <code>socks5</code> 换成 <code>http</code> ，同时改成正确的端口号。</p>\n<h2 id=\"设置-ssh-方式的代理\">设置 SSH 方式的代理<a href=\"#设置-ssh-方式的代理\" title=\"设置 SSH 方式的代理\"></a></h2><p>修改用户目录下文件  <code>~/.ssh/config</code> 里的内容，对 GitHub 域名作单独处理：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host github.com</span><br><span class=\"line\">    # 若使用的是默认端口，设置如下</span><br><span class=\"line\">    HostName           github.com</span><br><span class=\"line\">    # 如果想用443端口，设置如下</span><br><span class=\"line\">    # Hostname         ssh.github.com</span><br><span class=\"line\">    # Port             443</span><br><span class=\"line\">    User               git</span><br><span class=\"line\">    # 如果是 SOCKS5 代理，取消下面这行注释，并把 1080 改成自己 SOCKS5 代理的端口</span><br><span class=\"line\">    # ProxyCommand     nc -x localhost:1080 %h %p</span><br><span class=\"line\">    # 如果是 HTTP 代理，取消下面这行注释，并把 6666 改成自己 HTTP 代理的端口</span><br><span class=\"line\">    # ProxyCommand     socat - PROXY:127.0.0.1:%h:%p,proxyport&#x3D;6666</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"直接在终端设置临时代理\">直接在终端设置临时代理<a href=\"#直接在终端设置临时代理\" title=\"直接在终端设置临时代理\"></a></h2><p>或者我们可以在 <code>~/.bashrc</code>文件中，直接写入以下内容并保存：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias setproxy&#x3D;&quot;export ALL_PROXY&#x3D;socks5:&#x2F;&#x2F;127.0.0.1:1080&quot;</span><br><span class=\"line\">alias unsetproxy&#x3D;&quot;unset ALL_PROXY&quot;</span><br><span class=\"line\">alias ip&#x3D;&quot;curl -i http:&#x2F;&#x2F;ip.cn&quot;</span><br></pre></td></tr></table></figure>\n\n<p>clone 之前先在终端执行  <code>setproxy</code> 命令，结束后执行  <code>unsetproxy</code> 命令如果终端提示 <code>command not found: setproxy</code>，说明配置没有生效，执行一下  <code>source ~/.bashrc</code> 即可。</p>\n","prev":{"title":"手把手教你免费搭建 Shadowsocks 服务","link":"2018/build-a-free-shadowsocks-service"},"next":{"title":"借助 Safari 调试苹果手机上的 webView","link":"2018/debug-webview-with-safari"},"plink":"https://blog.fiteen.top/2018/set-up-sock5-or-http-proxy-for-git-on-mac/","toc":[{"id":"设置-http-方式的代理","title":"设置 HTTP 方式的代理","index":"1"},{"id":"设置-ssh-方式的代理","title":"设置 SSH 方式的代理","index":"2"},{"id":"直接在终端设置临时代理","title":"直接在终端设置临时代理","index":"3"}],"copyright":{"author":"FiTeen","link":"<a href=\"https://blog.fiteen.top/2018/set-up-sock5-or-http-proxy-for-git-on-mac/\" title=\"Git 手册之 Mac 上给 Git 设置 SOCKS5/HTTP 代理\">https://blog.fiteen.top/2018/set-up-sock5-or-http-proxy-for-git-on-mac/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}